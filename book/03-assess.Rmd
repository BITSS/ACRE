# Assessment

First, students will be asked to provide a detailed description of all the reproduction materials. Second, they are requested to connect the outputs chosen to reproduce with all of their corresponding inputs. With all this elements in place, students can score the level of reproducibility of a specific output, and the paper-level dimensions of reproducibility. 


## Describe inputs  

 **Raw data**      
 
- Identify data sources  
- Connect data sources with data files  
- Inspect completeness of data files  

 **Analysis data**  
 
- List all the files  
- Identify the location  
- Provide brief description  


#### Types of code:  
 - **Cleaning code:** a script should be classified as primarily data cleaning if most of its content is dedicated to actions such as: deleting variables or observations, merging data sets, removing outliers, and reshaping the structure of the data (from long to wide or vice versa).     
 - **Analysis code:** a script should be classified as primarily analysis code if most of its content is dedicated to actions such as: running regressions, running hypothesis tests, computing standard errors, and imputing missing values.


**Code**  

- list all the files  
- location  
- identify input files  
- identify output files  
- classify script into mainly analysis or mainly cleaning  


## Connect inputs with outputs  


## Assign a reproducibility score  


#### By sources used:  

 - **Computationally Reproducible from Analytic data (CRA):** an output is CRA if it can be reproduced with minimal effort starting from the analytic data sets.

 - **Computationally Reproducible from Raw data (CRR):** an output is CRR if it can be reproduced with minimal effort from the raw data sets.

#### Other definitions:  
 - **Minimal effort:** the definition of minimal effort we will use here is that of spending
five minutes or less in getting the code running. This five minutes do not include the computing time.

 - **Coding errors:**  a coding error will occur when a section in the code, of the reproduction package, executes a procedure that is in direct contradiction with the intended procedure expressed in the documentation (paper or comments of the code). For example an error happens if the paper specify that the analysis is perform on the population of males, but the code restricts the analysis to females only. Please follow the [ACRE procedure to report coding errors](ADD LINK).  


Assess the current level of computational reproducibility of the different outputs in the paper.  


### Levels of Computational Reproducibility
With the definitions and dimensions for improvement provided above, we can now outline different levels of computational reproducibility. Each level is defined on the basis of data and code availability, possible improvements, and weather or not to achieves some type of reproducibility.

The assessment is made at the output level. Hence a paper can be highly reproducible for its main results, but suffer of low reproducibility for other outputs (like tables and figures).

The following figure summarizes the different levels of computational reproducibility (for any given output). For each level, there will be possible improvements that have been done already (`-`), that can be done to move up one level of reproducibility (`✔`) or that are out of reach given the current level of reproducibility (`x`).



    Figure 1: Levels of Computational Reproducibility and Possible Improvements   

                                               |       |               Possible improvements              |
                                               -----------------------------------------------------------
                                               | Level |+Analysis|  +Raw  |+Analysis|+Cleaning|Debug|Debug|
                                               |       |   Data  |  Data  | Code(AC)| Code(CC)|  AC |  CC |
                                               --------|---------|--------|---------|---------|-----|-----|
    What data are available?                   |       |         |        |         |         |     |     |
    ├── None ..................................|   L1  |    ✔    |    ✔   |    x    |    x    |  x  |  x  |
    ├── Analytic data only. Code?              |       |         |        |         |         |     |     |
    |   ├── No code or cleaning code only......|   L2  |    -    |    ✔   |    ✔    |    x    |  x  |  x  |
    |   └── Analysis code only. Is it CRA?     |       |         |        |         |         |     |     |
    |      ├── No..............................|   L3  |    -    |    ✔   |    -    |    x    |  ✔  |  x  |
    |      └── Yes.............................|   L4  |    -    |    ✔   |    -    |    x    |  -  |  x  |
    └── Raw & Analytic data. Code?             |       |         |        |         |         |     |     |
       ├── None ...............................|   L5  |    -    |    -   |    ✔    |    ✔    |  x  |  x  |
       ├── Analysis code only. CRA?            |       |         |        |         |         |     |     |
       |  ├── No...............................|   L6  |    -    |    -   |    -    |    ✔    |  ✔  |  x  |
       |  └── Yes..............................|   L7  |    -    |    -   |    -    |    ✔    |  -  |  x  |
       └── A. and cleaning code. Is it CRR?    |       |         |        |         |         |     |     |
           ├── No. CRA?                        |       |         |        |         |         |     |     |
           |  ├── No...........................|   L8  |    -    |    -   |    -    |    -    |  ✔  |  ✔  |
           |  └── Yes..........................|   L9  |    -    |    -   |    -    |    -    |  -  |  ✔  |
           └── Yes.............................|   L10 |    -    |    -   |    -    |    -    |  -  |  -  |

 **Level 1 (L1):** There are no data or code available of any type. Possible improvements include: adding raw data (+AD) and adding analysis data (+RD).  

 **Level 2 (L2):** There are analytic data available, but no raw data or any type of code. Possible improvements include: adding raw data (+RD) and adding analysis code (+AC).  

 **Level 3 (L3):** Both analytic data sets and analysis code are available. However the code does not run or produces different results that those of the paper (not CRA). Possible improvements include obtaining raw data (+RD) or debugging the analysis code (DAC).    

 **Level 4 (L4):** Both analytic data sets and analysis code are available, and they produce the same output as in the paper (yes CRA). The reproducibility package can still be improved by obtaining the original raw data sets, or by documenting the steps required to obtain those files.   

 **Level 5 (L5):** All data, analytic and raw, are available. However some or all the codes for cleaning and analysis are missing. Steps for improvement include adding analysis code (+AC) and/or cleaning code (+CC).      

 **Level 6 (L6):**  All data and analysis code are available. However the code does not run or produces different results that those of the paper (not CRA). Possible improvements include adding the missing cleaning code (+CD) or debugging the analysis code (DAC).   

 **Level 7 (L7):**  All data and analysis code are available, and they produce the same output as in the paper (yes CRA). The reproducibility package can still be improved by adding adding the missing cleaning code (+CD).   

 **Level 8 (L8):**  All materials (raw and analysis data, and cleaning and analysis code) are available. However the code does not run or produces different results that those of the paper (not CRR and not CRA). Possible improvements include debugging the cleaning code (DCC) or debugging the analysis code (DAC).  

 **Level 9 (L9):**  All materials (raw and analysis data, and cleaning and analysis code) are available, and the analysis code produces the same output as in the paper (yes CRA). However the cleaning code does not run or produces different results that those of the paper (not CRR). Possible improvements include debugging the cleaning code (DCC).  

 **Level 10 (L10):** All materials are available and produce the same results as in the paper with minimal effort, starting from the analytic data sets (yes CRA) and from the raw data (yes CRR).    

The next section describes improvements that can be applied across levels and are meant to improve the readability of the reproducibility package.






  
  - 2.1 - List all the input materials found or referred in the reproduction package:      
    - 2.1.1 - List all raw data sources as described in the paper (for example "CPS March 2018 from CEPR") and, if raw data is available, match it with the filename in the reproducibility package (`cepr_march_2018.dta`). The result will have the following structure:    

          Raw data information:
          |----------------------|------|-----------------------------------------------|----------|---------------------|
          | data_source          | page | data_files                                    | complete | known_missing       |
          |----------------------|------|-----------------------------------------------|----------|---------------------|
          | "Current Population  | 3    | cepr_march_2018.dta                           | yes      |                     |
          | Survey 2018"         |      |                                               |          |                     |
          |----------------------|------|-----------------------------------------------|----------|---------------------|
          | "DHS 2010 - 2013"    | 4    | nicaraguaDHS_2010.csv;                        | no       | boliviaDHS_2011.csv |
          |                      |      | boliviaDHS_2010.csv; nicaraguaDHS_2011.csv;   |          |                     |
          |                      |      | nicaraguaDHS_2012.csv; boliviaDHS_2012.csv;   |          |                     |
          |                      |      | nicaraguaDHS_2013.csv; boliviaDHS_2013.csv    |          |                     |
          |----------------------|------|-----------------------------------------------|----------|---------------------|
          | "2017 SAT scores"    | 4    | Not available                                 | no       |                     |
          |----------------------|------|-----------------------------------------------|----------|---------------------|
          | ...                  | ...  | ...                                           | ...      | ...                 |
          |----------------------|------|-----------------------------------------------|----------|---------------------|


    - 2.1.2 - List and describe all the analytic data sets. The resulting report will have the following structure:  

          Analysis data information:
          |----------------|-----------------------|--------------------------------|
          | analysis_data  | location              | description                    |
          |----------------|-----------------------|--------------------------------|
          | final_data.csv | /analysis/fig1/       | data for figure1               |
          |----------------|-----------------------|--------------------------------|
          | all_waves.csv  | /final_data/v1_april/ | data for region-level analysis |
          |----------------|-----------------------|--------------------------------|
          | ...            | ...                   | ...                            |
          |----------------|-----------------------|--------------------------------|

    - 2.1.3 - List and describe all the code scripts. The result will have the following structure.  

          |-------------------|------------------|---------------------|---------------------|----------------------|--------------|
          | file_name         | location         | inputs              | outputs             | description          | primary_type |
          |-------------------|------------------|---------------------|---------------------|----------------------|--------------|
          | output_table1.do  | /code/analysis/  | analysis_data01.csv | output1_part1.txt   | produces first part  | analysis     |
          |                   |                  |                     |                     | of table 1           |              |
          |                   |                  |                     |                     | (unformatted)        |              |
          |-------------------|------------------|---------------------|---------------------|----------------------|--------------|
          | data_cleaning02.R | /code/cleaninig/ | admin_01raw.csv     | analysis_data02.csv | removes outliers     | cleaning     |
          |                   |                  |                     |                     | and missing vals     |              |
          |                   |                  |                     |                     | from raw admin data  |              |
          |-------------------|------------------|---------------------|---------------------|----------------------|--------------|
          | ...               | ...              | ...                 | ...                 | ...                  | ...          |
          |-------------------|------------------|---------------------|---------------------|----------------------|--------------|
  - 2.2 - Draw diagrams from output to raw data sources. For more examples of diagrams connecting final output to initial raw data, [see here](06_sample_diagrams.md).    

          table 1
            └───[code] formatting_table1.R
                ├───output1_part1.txt  
                |   └───[code] output_table1.do           
                |       └───[data] analysis_data01.csv
                |          └───[code] data_cleaning01.R
                |             └───[data] survey_01raw.csv
                └───output1_part2.txt  
                    └───[code] output_table2.do           
                        └───[data] analysis_data02.csv
                           └───[code] data_cleaning02.R
                              └───[data] admin_01raw.csv  

      This diagram can be represented in data format by specifying how each component depends to its inputs. For example:  

          Data representation of diagram behind Table 1.
          |-------|-------------------|---------------------|------------|
          | order | component         | depends_on          | other_info |
          |-------|-------------------|---------------------|------------|
          | 1     | table1            | formatting_table1.R | ...        |
          |-------|-------------------|---------------------|------------|
          | 2     | table1            | output1_part2.txt   | ...        |
          |-------|-------------------|---------------------|------------|
          | 3     | output1_part1.txt | output_table1.do    | ...        |
          |-------|-------------------|---------------------|------------|
          | 4     | output_table1.do  | analysis_data01.csv | ...        |
          |-------|-------------------|---------------------|------------|
          | ...   | ...               | ...                 | ...        |
          |-------|-------------------|---------------------|------------|

  - 2.3 - Assess the current [level](README.md#levels-of-computational-reproducibility) of computational reproducibility of each output    

          |-------------|-------|-----------------------|------------|
          | output_name | level | desc_of_missing_files | other_info |
          |-------------|-------|-----------------------|------------|
          | table 1     | 4     |                       | ...        |
          |-------------|-------|-----------------------|------------|
          | table 2     | 7     |                       | ...        |
          |-------------|-------|-----------------------|------------|
          | figure 1    | 5     |                       | ...        |
          |-------------|-------|-----------------------|------------|
          | ...         | ...   | ...                   | ...        |
          |-------------|-------|-----------------------|------------|

- 2.4 - Check for the existence of paper-level best practices for reproducibility    

      |--------------------------|------------|
      | best_practice            | exist      |
      |--------------------------|------------|
      | version control          |   yes      |
      | dynamic document         |   no       |
      | translate to open source |   no       |
      | file organization        |   yes      |
      | computing capsule        |   no       |
      |--------------------------|------------|



